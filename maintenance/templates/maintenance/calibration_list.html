{% extends "maintenance/base.html" %}
{% block title %}Kalibrasyon Cihazları{% endblock %}

{% block sidebar %}
  <div class="menu-card">
    <div class="menu-title">KALİBRASYON</div>
    <nav class="menu-links small">
      <a href="{% url 'admin:maintenance-calibration-follow' %}" class="menu-link">Kalibrasyon Takip Listesi</a>
      <a href="{% url 'admin:maintenance-calibration-create' %}" class="menu-link">Yeni Kalibrasyon Kaydı</a>
      <a href="{% url 'admin:maintenance-calibration-info' %}" class="menu-link">Ölçüm Cihazı Bilgi Formu</a>
      <a href="{% url 'admin:maintenance-cal-asset-create' %}" class="menu-link">Yeni Ölçüm Cihazı Girişi</a>
      <a href="{% url 'admin:maintenance-calibration-assets' %}" class="menu-link">Ölçüm Cihazı Listesi</a>
    </nav>
  </div>
{% endblock %}

{% block content %}
  <section class="header-card">
    <h1>Kalibrasyon Cihazları</h1>
    <div class="actions" style="display:flex;gap:8px">
      <a class="btn primary" href="{% url 'admin:maintenance-cal-asset-create' %}">➕ Ölçüm Cihazı Ekle</a>
      <a class="btn ghost" href="{% url 'admin:maintenance-calibration-create' %}">➕ Yeni Kalibrasyon Kaydı</a>
      <a class="btn ghost" href="{% url 'admin:maintenance-calibration-export' %}">⬇️ CSV Dışa Aktar</a>
    </div>
  </section>

  <div class="card">
    <table class="table">
      <thead>
        <tr>
          <th>Cihaz Kodu</th>
          <th>Cihaz Adı</th>
          <th>Lokasyon</th>
          <th>Marka / Model</th>
          <th>Seri No</th>
          <th>Bağlı Makine</th>
        </tr>
      </thead>
      <tbody>
        {% for a in assets %}
          <tr>
            <td>{{ a.asset_code }}</td>
            <td>{{ a.asset_name }}</td>
            <td>{{ a.location }}</td>
            <td>{{ a.brand }}{% if a.brand and a.model %} / {% endif %}{{ a.model }}</td>
            <td>{{ a.serial_no }}</td>
            <td>{% if a.equipment %}{{ a.equipment.code }} - {{ a.equipment.name }}{% else %}<span class="chip due">Bağlı değil</span>{% endif %}</td>
          </tr>
        {% empty %}
          <tr><td colspan="6">Kayıt bulunamadı. Üstten “Ölçüm Cihazı Ekle” ile oluşturabilirsiniz.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
